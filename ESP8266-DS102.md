Mem1 = Position (0-100%) 100 open
Mem2 = Last Command (open, close)
Var1 = 0=open, 1=close, 2=stop

```
ON mqtt#connected DO Subscribe Pos, shellies/shellyswitch25-C45BBE6B07DC/roller/0/pos ENDON
ON Event#Pos=0 DO mem1 0 ENDON
ON Event#Pos=100 DO mem1 1 ENDON

ON Button2#state DO event ROLLER1=%mem1% ENDON
ON event#ROLLER1=0 DO Backlog mem1 2; mem2 0; Publish shellies/shellyswitch25-C45BBE6B07DC/roller/0/command open ENDON
ON event#ROLLER1=1 DO Backlog mem1 2; mem2 1; Publish shellies/shellyswitch25-C45BBE6B07DC/roller/0/command close ENDON
ON event#ROLLER1=2 DO Backlog mem1 %mem2%; Publish shellies/shellyswitch25-C45BBE6B07DC/roller/0/command stop ENDON

```
